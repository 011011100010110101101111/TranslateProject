Ubuntu 的 Snap, Red Hat 的 Flatpak 这种通吃所有发行版的打包方式真的好用吗？
=================================================================================

![](http://www.iwillfolo.com/wordpress/wp-content/uploads/2016/06/Flatpak-and-Snap-Packages.jpg)

深入研究新一代的包开始进入到到Linux系统。

最近我们听到越来越多的消息是有关于 Ubuntu 的 Snap 包和 Red Hat 员工 Alexander Larsson 创造的 Flatpak （曾经叫做 xdg-app）

这两种下一代打包方法在本质上拥有相同的目标和特点：即独立包装和不依赖于第三方系统函数库。

这种 Linux 新技术方向似乎自然会导致这样的问题：独立包的优点/缺点是什么？这是否让我们拥有更好的 Linux 系统？其背后的动机是什么?

为了回答这些问题，让我们先深入了解一下 Snap 和 Flatpak。

### 动机

根据 [Flatpak][1] 和 [Snap][2] 的声明，背后的主要动机是使同一版本的应用程序能够运行在多个 Linux 发行版。

>“从一开始它的主要目标是允许相同的应用程序运行在各种 Linux 发行版和操作系统上。” Flatpak

>“……‘snap’ 通用 Linux 包格式，使简单的二进制包能够完美的安全的运行在任何 Linux 桌面、服务器、云和设备上。” Snap

说得更具体一点，站在 Snap 和 Flatpak （以下称之为S&F）背后的人认为，Linux 平台存在碎片化的障碍。

这个障碍导致了开发者们需要做许多不必要的工作来使他的软件能够运行在各种不同的发行版上，这影响了整个平台的前进。

所以，作为 Linux 发行版（Ubuntu 和 Red Hat）的领导者，他们希望消除这个障碍，推动平台发展。

但是，是否是更多的个人收益刺激了 S&F 的开发？

#### 个人收益？

虽然没有任何官方声明，但是试想一下，如果能够创造这种可能会被大多数发行版（可能不是全部）所采用的打包方式，那么这个项目的领导者将可能成为一个能够决定 Linux 大船航向的重要人物。

### 优势

这种独立包的好处多多，并且取决于不同的因素。

这些因素基本上可以归为两类：

#### 用户角度

+ Liunx 用户的观点认为：Snap 和 Flatpak 带来了将任何应用安装在用户使用的任何发行版上的可能性。

例如你在使用一个不是很流行的发行版，由于开发工作的缺乏，它的 repo 只有很稀少的包。现在，通过 S&F 你就可以显著的增加包的数量，这是一个多么美好的事情。

+ 同样，对于使用流行的发行版的用户，即使该发行版的 repo 上有很多的包，他也可以在不改变它现有的函数库的同时安装一个新的包。

比方说, 一个 Debian 的用户想要安装一个 “测试分支” 的包，但是他又不想将他的整个系统变成测试版（以防该包需要运行在更新的函数库上）。现在，他可以简单的想安装哪个版本就安装哪个版本，而不需要考虑库的问题。

对于后者的观点，已经考虑到用户有可能使用源文件编译他们的包，然而，除非你使用基于源的发行版，否则大多数用户将从头编译视为是一个恶心到吐的事情。

+ 高级用户，或者称之为 “拥有安全意识的用户” 可能会觉得更容易接受这种类型的包，只要它们来自可靠来源，这种包倾向于提供另一层隔离，因为它们通常是与系统包想隔离的。

* 不论是 Snap 还是 Flatpak 都在不断努力增强它们的安全性，通常他们都使用 “沙盒” 来隔离，以防止它们可能携带病毒感染整个系统，就像微软 windows 系统中的 .exe 程序一样。（大多数在微软，而 S&F 紧随其后）

#### 开发者角度

与普通用户相比，对于开发者来说，开发 S&F 包的优点可能更加清楚。这一点已经在上一节有所提示。

尽管如此，这些优点有：

+ S&F 通过统一开发的过程，将多发行版的开发变得简单了起来。对于需要将他的应用运行在多个发行版的开发者来说，这大大的减少了他们的工作量。

++ 因此，开发者能够更容易的使他的应用运行在更多的设备上。

+ S&F 允许开发者私自发布他的包，不需要依靠发行版维护者在每一个发行版稳定发布他的包

++ 通过上述方法，开发者可以不依赖发行版而直接获取并统计用户的对其软件的采用和支持数据
。

++ 同样是通过上述方法，开发者可以更好的直接与用户互动，而不需要通过中间媒介，比如发行版这种中间媒介。

### 缺点

– 膨胀. 就是这么简单. Flatpak 和 Snap 并不是凭空变出来他的依赖关系。相反，他是通过将依赖关系预构建在其中来代替使用系统中的依赖关系。

就像谚语说的：“如果山不过来，我们就去山上吧”

– 之前提到安全意识强的用户会喜欢 S&F 提供的额外的一层隔离，只要该应用来自一个受信任的来源。但是从另外一个角度看，知识较少的用户，可能会从一个不靠谱的地方弄来一个包含恶意软件的包从而导致危害。

上面提到的观点可以说是有很有意义的，虽说今天的流行方法，像ppa、overlays等也可能是来自不受信任的来源。

但是，S&F 包更加增加这个风险，因为恶意软件开发者只需要开发一个版本就可以感染各种发行版。相反，如果没有 S&F，恶意软件的开发者就需要创建不同的版本以适应不同的发行版。

微软的方法都是正确的吗？

考虑到上面提到的，很显然，在大多数情况下,使用 S&F 包的优点超过缺点。

至少对于二进制发行版的用户，或者非轻量级集中发行版的用户是这样。

这使我问出这个问题，可能微软一直是正确的吗？如果是的，那么当 S&F 变成 Linux 的标准后，你还会一如既往的使用 Linux 或者 类 Unix 系统吗？

很显然，时间会是这个问题的最好答案。

不过，我得承认也许并不是全部正确的，但是从微软的信誉来看，它有着很好的观点，并且所有这些可以用在开箱即用的 Linux 上的可行的方法都将加在我的书中。

--------------------------------------------------------------------------------

via: http://www.iwillfolo.com/ubuntus-snap-red-hats-flatpack-and-is-one-fits-all-linux-packages-useful/

作者：[Editorials][a]
译者：[Chao-zhi](https://github.com/Chao-zhi)
校对：[校对者ID](https://github.com/校对者ID)

本文由 [LCTT](https://github.com/LCTT/TranslateProject) 原创翻译，[Linux中国](https://linux.cn/) 荣誉推出

[a]: http://www.iwillfolo.com/category/editorials/
[1]: http://flatpak.org/press/2016-06-21-flatpak-released.html
[2]: https://insights.ubuntu.com/2016/06/14/universal-snap-packages-launch-on-multiple-linux-distros
